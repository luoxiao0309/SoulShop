@using SoulShop.Model;
@{
    Layout = "~/Areas/Shop/Views/Shared/_ShopNavView.cshtml";
    List<T_Base_ShopProduct> listShopProduct = ViewBag.listShopProduct;
    List<T_Base_ProductCategory> listProductCategory = ViewBag.listProductCategory;
    List<T_Base_SaleProduct> listSaleProductPre = ViewBag.listSaleProductPre;
    List<T_Base_SaleProduct> listSaleProduct = ViewBag.listSaleProduct;
}

@section css{
    <title>主页</title>
    <link href="~/Areas/Shop/MyCSS/Buyer/Order.css" rel="stylesheet" />
    <link href="~/Areas/Shop/MyCSS/Main/Main.css" rel="stylesheet" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=M1mt3fUZntsnljyuaZ4mBVN0qtNgwgOe"></script>
    <script src="~/Areas/Shop/MyJS/Main/BaiduMap.js"></script>
    <script src="~/Areas/Shop/MyJS/Buyer/Order.js"></script>
    <script src="~/Areas/Shop/MyJS/Main/Main.js"></script>
    <style>
    </style>
}

<!--工具栏-->
<div class="container top-tools-wrap container-lowlg-width-p100">
    <button id="MapBtn" class="btn btn-outline-info" data-toggle="modal" data-target="#MapModel">定位</button>
    <div class="btn btn-info map-now-area-text" style="background-color:#8fcafe; border-color:#8fcafe">定位中...</div>
    <!--Model-->
    <div class="modal fade" id="MapModel" tabindex="-1" role="dialog" aria-labelledby="MapModelLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="MapModelLabel">定位</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span a-ria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="map-tools pb-3 row" style="">
                        <div class="col-6 row no-gutters justify-content-between">
                            <input id="MapCitySearchInput" type="text" class="form-control" style="display: inline-block; width: clas" />
                            <div id="MapCitySearchBtn" class="btn btn-info">
                                <img src="/Icon/NavView/search-fff.png" style="width: 1.25rem; height: 1.25rem; display: block; margin: 0 auto">
                            </div>
                            <div class="citys-wrap">
                                <div class="list-group">
                                </div>
                            </div>
                        </div>
                        <div class="col-6 row no-gutters">
                            <div id="MapCurrentProvince">北京市</div>
                            <div id="MapCurrentCity" class="col-12 text-oneline-overhidden">北京市</div>
                            <div id="MapCurrentCP">北京市-北京市</div>
                        </div>
                    </div>
                    <div id="soulMap" style="width: 100%;"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info">确定</button>
                    <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!--部分一：广告-->
<div class="container one-wrap container-lowlg-width-p100 container-lowlg-nop">
    <!--分类列表-->
    <div class="one-classification list-group">
        <a href="/Shop/Shop/ProductList?productType=1" class="list-group-item" style="background-image: url(/Text/NavView/传统美食.png)"><img class="class-icon" src="/Icon/Main/美食.png" /></a>
        <a href="/Shop/Shop/ProductList?productType=2" class="list-group-item" style="background-image: url(/Text/NavView/特色生鲜.png)"><img class="class-icon" src="/Icon/Main/水果.png" /></a>
        <a href="/Shop/Shop/ProductList?productType=3" class="list-group-item" style="background-image: url(/Text/NavView/养生补品.png)"><img class="class-icon" src="/Icon/Main/人参.png" /></a>
        <a href="/Shop/Shop/ProductList?productType=4" class="list-group-item" style="background-image: url(/Text/NavView/木制工艺.png)"><img class="class-icon" src="/Icon/Main/树.png" /></a>
        <a href="/Shop/Shop/ProductList?productType=5" class="list-group-item" style="background-image: url(/Text/NavView/金属工艺.png)"><img class="class-icon" src="/Icon/Main/金属.png" /></a>
        <a href="/Shop/Shop/ProductList?productType=6" class="list-group-item" style="background-image: url(/Text/NavView/陶制工艺.png)"><img class="class-icon" src="/Icon/Main/陶艺.png" /></a>
        <a href="/Shop/Shop/ProductList?productType=7" class="list-group-item" style="background-image: url(/Text/NavView/珠宝玉器.png)"><img class="class-icon" src="/Icon/Main/钻石.png" /></a>
    </div>
    <!--广告区1-->
    <div class="one-ad" style="perspective:1000px; transform-style: preserve-3d;">
        <div id="MainCarouse" class="carousel slide" data-ride="carousel" data-interval="false" data-nowrotateY="0" data-nowrotateX="0">
            <ol class="carousel-indicators">
                <li data-target="#MainCarouse" data-slide-to="0" class="active"></li>
                <li data-target="#MainCarouse" data-slide-to="1"></li>
                <li data-target="#MainCarouse" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
                <div class="carousel-item active">
                    <img class="d-block" src="/Image/Cover/bg2.jpg">
                </div>
                <div class="carousel-item">
                    <img class="d-block" src="/Image/Cover/bg1.jpg">
                </div>
                <div class="carousel-item">
                    <img class="d-block" src="/Image/Cover/bg3.jpg">
                </div>
            </div>
            <a class="carousel-control-prev" href="#MainCarouse" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#MainCarouse" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
        <div class="one-ad-fixedad">
            <a style="background-image: url(/Image/Main/img-fixedad1.png)"></a>
            <a style="background-image: url(/Image/Main/img-fixedad2.png)"></a>
            <a style="background-image: url(/Image/Main/img-fixedad3.png)"></a>
        </div>
    </div>
    <!--广告区2-->
    <div class="one-ad2" style="border: #d0d5d8 solid 1px">
        <a style="background-image: url(/Image/Main/img-ad2-fixedad1.jpeg)"></a>
        <a style="background-image: url(/Image/Main/img-ad2-fixedad2.jpeg)"></a>
        <a style="background-image: url(/Image/Main/img-ad2-fixedad3.jpg)"></a>
    </div>
</div>
<!--部分二：活动-->
<div class="container two-wrap container-lowlg-width-p100 container-lowlg-nop mt-3 mt-md-5">
    <nav class="nav nav-tabs row justify-content-center text-center" role="tablist">
        <a id="Tab-SaleTabNow" class="nav-item nav-link col-5 col-sm-3 active" href="#SaleTabNow" data-toggle="tab" role="tab" aria-controls="SaleTabNow" aria-expanded="true">限时疯抢</a>
        <a id="Tab-SaleTabPre" class="nav-item nav-link col-5 col-sm-3" href="#SaleTabPre" data-toggle="tab" role="tab" aria-controls="SaleTabPre" aria-expanded="false">活动预告</a>
    </nav>
    <div class="tab-content">
        <div id="SaleTabNow" class="tab-pane row no-gutters fade show active" aria-labelledby="Tab-SaleTabNow" aria-expanded="true">
            <div id="SaleTabNowLoadAminate" class="load-aminate">
                <div class="load-aminate-item load-aminate-item-one"><img src="~/Image/NavView/load.png"></div>
                <div class="load-aminate-item load-aminate-item-two"><img src="~/Image/NavView/load.png"></div>
                <div class="load-aminate-item load-aminate-item-three"><img src="~/Image/NavView/load.png"></div>
                <div class="load-aminate-item load-aminate-item-four"><img src="~/Image/NavView/load.png"></div>
            </div>
            @if (listSaleProduct != null)
            {
                    foreach (T_Base_SaleProduct item in listSaleProduct)
                    {
                        <div class="sale-product-card card col-6 col-sm-4 col-md-3 pb-1 p-sm-0" data-id="@item.ShopProduct.ID" data-saleid="@item.ID">       
                            <div class="product-img-wrap card-img-top w-100" style="background-image: url(@item.ShopProduct.PicList[0].Path)">
                                <img src="@item.ShopProduct.PicList[0].Path" />
                            </div>
                            <div class="card-block">
                                <div class="card-title text-oneline-overhidden">@item.ShopProduct.OrProduct.Name</div>
                                <p class="card-text-style">
                                    <span class="card-text-size">@item.ShopProduct.Size</span>
                                    <span>&nbsp;&nbsp;</span>
                                    <span class="card-text-color">@item.ShopProduct.Color</span>
                                </p>
                                <p class="card-text card-text-description">@item.ShopProduct.OrProduct.Description</p>
                                <p class="card-text"><span class="money-cancel mr-auto">￥@decimal.Round((decimal)item.ShopProduct.Price, 0)</span><span>@item.ShopProduct.MonthlySale 人已购</span></p>
                            </div>
                            @{
                                decimal nowpay = decimal.Round((decimal)(item.ShopProduct.Price * item.Discount), 0);
                             }
                            <div class="now-pay">￥@nowpay</div>
                            <div class="card-btn-group">
                                <a class="now-shopping btn btn-outline-secondary">立即购买</a>
                                <a href="/Shop/Shop/Detail?shopId=@item.ShopProduct.ShopID&productId=@item.ShopProduct.ProductID&size=@item.ShopProduct.Size&color=@item.ShopProduct.Color" class="check-detail btn btn-outline-secondary">查看详情</a>
                            </div>   
                        </div>
                    }
            }      
        </div>
        <div id="SaleTabPre" class="tab-pane row no-gutters fade" aria-labelledby="Tab-SaleTabPre" aria-expanded="false">
            <div id="SaleTabPreLoadAminate" class="load-aminate">
                <div class="load-aminate-item load-aminate-item-one"><img src="~/Image/NavView/load.png"></div>
                <div class="load-aminate-item load-aminate-item-two"><img src="~/Image/NavView/load.png"></div>
                <div class="load-aminate-item load-aminate-item-three"><img src="~/Image/NavView/load.png"></div>
                <div class="load-aminate-item load-aminate-item-four"><img src="~/Image/NavView/load.png"></div>
            </div>
            @if (listSaleProductPre != null)
           {
                 foreach (T_Base_SaleProduct item in listSaleProductPre)
                 {
                    <div class="sale-product-card card col-6 col-sm-4 col-md-3 pb-1 p-sm-0" data-id="@item.ID" data-saleid="@item.ID">       
                        <div class="product-img-wrap card-img-top w-100" style="background-image: url(@item.ShopProduct.PicList[0].Path)">
                            <img src="@item.ShopProduct.PicList[0].Path" />
                        </div>
                        <div class="card-block">
                            <div class="card-title text-oneline-overhidden">@item.ShopProduct.OrProduct.Name</div>
                            <p class="card-text-style">
                                <span class="card-text-size">@item.ShopProduct.Size &nbsp;</span>
                                <span class="card-text-color">@item.ShopProduct.Color</span>
                            </p>
                            <p class="card-text card-text-description">@item.ShopProduct.OrProduct.Description</p>
                            <p class="card-text"><span class="money-cancel mr-auto">￥@item.ShopProduct.Price</span><span>@item.ShopProduct.MonthlySale 人已购</span></p>
                        </div>
                        @{
                            decimal nowpay = decimal.Round((decimal)(item.ShopProduct.Price * item.Discount), 0);
                        }
                        <div class="now-pay">￥@nowpay</div>
                        <div class="card-btn-group">
                            <a class="now-shopping btn btn-outline-secondary">立即购买</a>
                            <a href="/Shop/Shop/Detail?shopId=@item.ShopProduct.ShopID&productId=@item.ShopProduct.ProductID&size=@item.ShopProduct.Size&color=@item.ShopProduct.Color" class="check-detail btn btn-outline-secondary">查看详情</a>
                        </div>   
                    </div>
                }
            }
        </div>
    </div>
</div>
<!--更多btn-->
<div class="container container-lowlg-width-p100 container-lowlg-nop mt-2 mt-md-3 more-btn-wrap">
    <a href="/Shop/Shop/SaleProductList?saleType=1" class="more-btn btn btn-outline-secondary">更多</a>
</div>
<!--部分三：热销-->
<div class="container three-wrap container-lowlg-width-p100 container-lowlg-nop mt-2 mt-md-4">
    <div class="card">
        <div class="card-header my-title-12">
            热销商品
        </div>
        <div class="card-block row no-gutters p-0">
            <div id="HotWrapLoadAminate" class="load-aminate">
                <div class="load-aminate-item load-aminate-item-one"><img src="~/Image/NavView/load.png"></div>
                <div class="load-aminate-item load-aminate-item-two"><img src="~/Image/NavView/load.png"></div>
                <div class="load-aminate-item load-aminate-item-three"><img src="~/Image/NavView/load.png"></div>
                <div class="load-aminate-item load-aminate-item-four"><img src="~/Image/NavView/load.png"></div>
            </div>
            @foreach (T_Base_ShopProduct item in listShopProduct)
            {
                <div class="hot-product-card card col-6 col-sm-4 col-md-3 p-0 radius-0 border-0" data-id="@item.ID">         
                    <div class="product-img-wrap card-img-top w-100 radius-0" style="background-image: url(@item.PicList[0].Path)">
                        <img src="@item.PicList[0].Path" />
                    </div>
                    <div class="card-block">
                        <div class="card-title text-oneline-overhidden">@item.OrProduct.Name</div>
                        <p class="card-text-style">
                            <span class="card-text-size">@item.Size</span>
                            <span>&nbsp;&nbsp;</span>
                            <span class="card-text-color">@item.Color</span>
                        </p>
                        <p class="card-text card-text-description text-oneline-overhidden">@item.OrProduct.Description</p>
                        <p class="card-text text-oneline-overhidden"><span class="mr-auto hot-money">￥@item.Price</span><span class="my-smaller-font">@item.MonthlySale 人已购</span></p>
                    </div>
                    <div class="card-btn-group">
                        <div class="join-shopcar btn btn-outline-secondary">加入购物车</div>
                        <a href="/Shop/Shop/Detail?shopId=@item.ShopID&productId=@item.ProductID&size=@item.Size&color=@item.Color" class="check-detail btn btn-outline-secondary">查看详情</a>
                    </div>
                    <img src="/Icon/Main/HOT.png" class="hot-icon" />
                </div>
            }
        </div>
    </div>
</div>
<!--更多btn-->
<div class="container container-lowlg-width-p100 container-lowlg-nop mt-2 mt-md-3 more-btn-wrap">
    <a href="/Shop/Shop/ProductList?saleType=1" class="more-btn btn btn-outline-secondary">更多</a>
</div>

@section modal{
    <!--订单模态框-->
    <div id="modalOrder" class="soul-modal">
        <div class="container container-lowlg-width-p100 container-lowlg-nop order-head-wrap mt-2 mt-md-4 pr-0 pl-0">
            <div class="order-head-edit">
                <div class="order-head-edit-btn order-head-edit-create-btn" data-id=""><div style="background-image: url(/Icon/Buyer/新建.png);">新建</div></div>
                <div class="order-head-edit-btn order-head-edit-choose-btn"><div style="background-image: url('/Icon/Buyer/选择.png');">选择</div></div>
            </div>
            <div class="order-head-border-wrap">
                <div class="order-head" data-id="">
                    <div class="order-address text-oneline-overhidden">
                        <span>收货地址：</span><span class="value"></span>
                    </div>
                    <div class="order-phone text-oneline-overhidden">
                        <span>联系电话：</span><span class="value"></span>
                    </div>
                    <div class="order-receiver-name text-oneline-overhidden">
                        <span>收件人姓名：</span><span class="value"></span>
                    </div>
                </div>
            </div>
        </div>
        <!--地址新建区-->
        <div class="container container-lowlg-width-p100 container-lowlg-nop order-address-edit order-address-create pl-0 pr-0">
            <div class="order-address-create-border-wrap">
                <div class="order-address-create-item order-address-create-address">
                    <div class="item-label">收货地址</div><div class="item-input-wrap"><input type="text" /></div>
                </div>
                <div class="order-address-create-item order-address-create-phone">
                    <div class="item-label">联系电话</div><div class="item-input-wrap"><input type="text" /></div>
                </div>
                <div class="order-address-create-item order-address-create-name" style="padding-bottom: 1rem;">
                    <div class="item-label">收件人姓名</div>
                    <div class="item-input-wrap"><input type="text" /></div>
                </div>
                <img class="order-address-create-ok-btn" src="~/Icon/Buyer/完成.png" />
            </div>
        </div>
        <!--地址选择区-->
        <div class="container container-lowlg-width-p100 container-lowlg-nop order-address-edit order-address-choose pl-0 pr-0">
            <!--例子-->
            <div class="order-address-choose-border-wrap" data-id="">
                <div class="order-address-choose-item">
                    <div class="item-address text-oneline-overhidden">
                        <span>收货地址：</span><span class="value"></span>
                    </div>
                    <div class="item-phone text-oneline-overhidden">
                        <span>联系电话：</span><span class="value"></span>
                    </div>
                    <div class="item-receiver-name text-oneline-overhidden">
                        <span>收件人姓名：</span><span class="value"></span>
                    </div>
                </div>
                <img class="order-address-choose-item-sign" src="~/Icon/Buyer/绿打勾.png" />
            </div>
        </div>
        <!--条目区-->
        <div class="container container-lowlg-width-p100 container-lowlg-nop order-wrap mt-3">

        </div>
        <div class="container container-lowlg-width-p100 container-lowlg-nop order-tools mt-3">
            <div class="order-btn order-close-btn">关闭</div>
            <div class="order-sumprice">总金额：<span class="order-sumprice-sign">￥</span><span class="order-sumprice-value">100</span></div>
            <div class="order-btn order-sure-btn">确认</div>
        </div>
    </div>
}